{% extends "base.html" %}

{% block content %}
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Search Results:</h3>
    </div>
    <div class="panel-body">
      <div class="row">
        {% if request.GET.search_query %}
          <div class="col-xs-12 col-sm-6 col-md-3">
            Search Query: {{ request.GET.search_query }}
          </div>
        {% endif %}
        {% if request.GET.location_raw %}
          <div class="col-xs-12 col-sm-6 col-md-3">
            location: {{ request.GET.location_raw }}
          </div>
        {% endif %}
        {% if request.GET.type %}
          <div class="col-xs-12 col-sm-6 col-md-3">
            ticket type {{ request.GET.type }}
          </div>
        {% endif %}
        {% if request.GET.start_date or request.GET.end_date %}%}
          <div class="col-xs-12 col-sm-6 col-md-3">
            {% if request.GET.start_date %} from: {{ request.GET.start_date }} {% endif %}
            {% if request.GET.end_date %} until: {{ request.GET.end_date }} {% endif %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>

  <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#search-ticket-navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="search-ticket-navbar">
        <p style="display: inline-block; margin-top:auto; margin-bottom: auto;">Filter by: </p>
        <ul style="float: None; display: inline-block;" class="nav navbar-nav pagination">
          <li><a>Event Type</a></li>
          <li><a>Price</a></li>
          <li><a>Distance from Location</a></li>
          <li><a>User Rating</a></li>
          <li><a>Payment Type</a></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>

  <div class="table-responsive">
    <table class="table table-striped">
      {% if query %}
        <thead>
          <tr>
            <th>Date</th>
            <th>Price</th>
            <th>Artist/Team Location</th>
            <th>Title</th>
            <th>User Info.</th>
          </tr>
        </thead>
        <tbody>
           {% for ticket in page.object_list %}
            {% include "tickets/search_result.html" with ticket=ticket %} <!-- Defining ticket is not necessary, but I think it's more clear -->
          {% endfor %}
        </tbody>
      {% endif %}
    </table>
  </div>

{% endblock %}