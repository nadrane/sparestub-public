{% extends "base.html" %}
{% load static %}
{% load tz %}

{% block css %}
  {{ block.super }}
  <link href="{% static "tickets/css/search.css" %}" rel="stylesheet">
{% endblock %}

{% block content %}
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Search Results:</h3>
    </div>
    <div class="panel-body">
    {% comment %}
      <div class="row">
        {% if request.GET.q %}
          <div class="col-xs-12 col-sm-6 col-md-3">
            Search Query: {{ request.GET.q }}
          </div>
        {% endif %}
        {% if request.GET.location_raw %}
          <div class="col-xs-12 col-sm-6 col-md-3">
            Location: {{ request.GET.location_raw }}
          </div>
        {% endif %}
        {% if request.GET.ticket_type %}
          <div class="col-xs-12 col-sm-6 col-md-3">
            Ticket Type: {{ request.GET.ticket_type }}
          </div>
        {% endif %}
        {% if request.GET.start_date or request.GET.end_date %}
          <div class="col-xs-12 col-sm-6 col-md-3">
            {% if request.GET.start_date %} Date From: {{ request.GET.start_date }} {% endif %}
            {% if request.GET.end_date %} Date To: {{ request.GET.end_date }} {% endif %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
  {% endcomment %}

  <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#search-ticket-navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="search-ticket-navbar">
        <p class="pull-left">Filter by: </p>
        <ul class="nav navbar-nav pagination pull-left">
          <li><a>Event Type</a></li>
          <li><a>Price</a></li>
          <li><a>Distance from Location</a></li>
          <li><a>User Rating</a></li>
          <li><a>Payment Type</a></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>

  <div class="table-responsive">
    <table class="table table-striped">
      {% if page.object_list %}
        <thead>
          <tr>
            <th>Date</th>
            <th>Price</th>
            <th>Location</th>
            <th>Title</th>
            <th>User Info</th>
          </tr>
        </thead>
        <tbody>
           {% for ticket in page.object_list %}
            {% include "tickets/search_result.html" with ticket=ticket %} <!-- Defining ticket is not necessary, but I think it's more clear -->
          {% endfor %}
        </tbody>
      {% endif %}
    </table>
  </div>
</div>
  </div>
{% endblock %}

{% block js %}
  {{ block.super }}

{% endblock %}