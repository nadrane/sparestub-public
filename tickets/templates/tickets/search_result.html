{% load tz %}
{% load misc_filters %}

<tr>
  {% comment %}Turn localtimeoff because the events might be in a different timezone than the user. We don't want to
  convert the event time to the timezone of the user but to the timezone of the event's location.
  Ticket.get_formatted_start_datetime does this for us. Django will undo the change if localtime is on {% endcomment %}
  <td class="col-xs-1"><a href={% url "view_profile" username=ticket.poster.user_profile.username %}>{% localtime off %}{{ ticket.get_formatted_start_datetime.date }}<br>{{ ticket.get_formatted_start_datetime.time }}{% endlocaltime %}</a></td>
  <td class="col-xs-1">
    {{ ticket.price }} <br>
    {{ ticket.get_payment_method_display }}
  </td>
  <td class="col-xs-1">{{ ticket.location }}<br>{{ ticket.venue }}</td>
  <td class="col-xs-3">{{ ticket.title | truncatechars:200}}</td>
  <td class="col-xs-3">
    <img style="height: 100%; max-height: 75px;" class="pull-left" src="{{ ticket.poster.profile_picture.search_thumbnail.url }}">
    <div style="padding-left: 10px;" class="pull-left">
      <a href="{{ ticket.poster.user_profile.get_absolute_url }}">{{ ticket.poster}}{% if ticket.poster.age %}, {{ ticket.poster.age }}{% endif %}</a>
      <br>
      <span>
        {% for x in ticket.poster.rating|get_range %}
          <span class="glyphicon glyphicon-star"></span>
        {% endfor %}
      </span>
    </div>
  </td>
</tr>